<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Question Generator</title>
  <style>
    :root{
      --bg: #f5f7fa;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --brand: #2563eb;
      --border: #e5e7eb;
    }

    *{ box-sizing: border-box; }
    html, body{ height: 100%; }
    body{
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    body > *{
      max-width: 960px;
      margin-inline: auto;
      padding-inline: 16px;
    }

    body > p:first-of-type,
    body > div,
    form#topicForm,
    form#problemForm,
    body > div:last-of-type {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-top: 16px;
    }

    body > p:first-of-type{
      font-size: 1.5rem;
      font-weight: 700;
      margin-top: 24px;
      margin-bottom: 8px;
    }

    body > div > p,
    p[for="topic"] {
      margin: 0 0 8px;
      color: var(--muted);
      font-weight: 600;
    }

    ol{
      margin: 8px 0 0;
      padding-left: 20px;
    }
    ol li{ margin: 2px 0; }

    input[type="number"], textarea{
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 10px;
      font: inherit;
      background: #fff;
    }
    textarea{ min-height: 160px; }

    button{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 16px;
      border-radius: 10px;
      border: 1px solid var(--brand);
      color: #fff;
      background: var(--brand);
      font-weight: 600;
      cursor: pointer;
      transition: filter .15s ease, transform .05s ease;
      margin-top: 10px;
    }
    button:hover{ filter: brightness(1.05); }
    button:active{ transform: translateY(1px); }

    #problemOutput,
    #outputPython{
      display: block;
      background: #0f172a;
      color: #e5e7eb;
      border: 1px solid #111827;
      border-radius: 10px;
      padding: 14px 16px;
      overflow: auto;
      margin-top: 10px;
      white-space: pre-wrap;
    }

    #output{
      display: inline-block;
      margin-left: 8px;
      color: var(--muted);
      font-weight: 600;
    }

    form#topicForm > input,
    form#problemForm > input{
      margin-top: 6px;
    }
  </style>
</head>

<body>
  <p>Question Generator</p>
  <div>
    <p>Pick a topic (1-4)</p>
    <ol>
      <li>algorithm problems</li>
      <li>for-loop problems</li>
      <li>if-else problems</li>
      <li>recursion problems</li>
    </ol>
  </div>

  <form id="topicForm">
  <input type="number" name="topic" min="1" max="4" id="topic">
  <button type="submit">Submit</button>
</form>
  <p id="output"></p>
  <br>

<p>Please pick a number 1-5</p>
   <form id = "problemForm">
    <input type="number" name="problemNum" min = "1" max="5" id ="problemNum">
    <button type="submit">submit</button>
  </form> 
  <p id="problemOutput"></p>
  <br>
  <p>Please enter your Python here :</p>
  <div>
    <form>
      <textarea id="userCode" rows="8" cols="60"></textarea>
  <br>
   <button type="button" onclick="runPython()">Run Python</button>
  <pre id="outputPython"></pre>

    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
  <script>
    let problemsData = {}; 
    let topic = ""; 

    
    fetch('problems.json')
      .then(response => response.json())
      .then(data => {
        problemsData = data;
      });

    
    document.getElementById("topicForm").addEventListener("submit", function (e) {
      e.preventDefault(); 
      const type = document.getElementById("topic").value;
      let output = "";

      if (type === "1") {
        output = "you picked algorithm problems";
        topic = "algo_problems";
      } else if (type === "2") {
        output = "you picked for-loop problems";
        topic = "for_loop_problems";
      } else if (type === "3") {
        output = "you picked if-else problems";
        topic = "if_else_problems";
      } else if (type === "4") {
        output = "you picked recursion problems";
        topic = "recursion_problems";
      }
      document.getElementById("output").innerText = output;
    });

  
    document.getElementById("problemForm").addEventListener("submit", function (e) {
      e.preventDefault();
      // const answer = document.getElementById[topic][num].test_cases[0].output;
      const num = document.getElementById("problemNum").value;
      if (topic && problemsData[topic]) {
        document.getElementById("problemOutput").innerText = "your question is : " + problemsData[topic][num].description + "\n testcase : " + problemsData[topic][num].test_cases[0].input + "\n \n answer should be: " + problemsData[topic][num].test_cases[0].output;
        // console.log(answer);
      } else {
        document.getElementById("problemOutput").innerText = "Pick topic first pls.";
      }
    });

    let pyodideReady = false;
  let pyodide;

  async function loadPyodideAndPackages() {
    pyodide = await loadPyodide();
    pyodideReady = true;
    console.log("Pyodide loaded");
  }

  loadPyodideAndPackages();

  async function runPython() {
    if (!pyodideReady) {
      alert("Python loading...");
      return;
    }

  const userCode = document.getElementById("userCode").value;

  let output = "";

  
  pyodide.setStdout({ batched:(text) => { output += text; } });
  pyodide.setStderr({ batched:(text) => { output += "Error: " + text; }});

  try {
    await pyodide.runPythonAsync(userCode); 
    document.getElementById("outputPython").innerText = output;
  } catch (err) {
    document.getElementById("outputPython").innerText = "did not work";
  }
}
  </script>

</body>

</html>
